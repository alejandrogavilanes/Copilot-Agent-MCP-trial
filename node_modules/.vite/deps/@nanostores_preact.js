import {
  d,
  y
} from "./chunk-X7TGIXJS.js";
import {
  listenKeys
} from "./chunk-4KSJFT6A.js";
import "./chunk-ZF74IIEI.js";
import "./chunk-OL46QLBJ.js";

// node_modules/@nanostores/preact/index.js
function useStore(store, opts = {}) {
  let [, forceRender] = d({});
  let [valueBeforeEffect] = d(store.get());
  y(() => {
    valueBeforeEffect !== store.get() && forceRender({});
  }, []);
  y(() => {
    let batching, timer, unlisten;
    let rerender = () => {
      if (!batching) {
        batching = 1;
        timer = setTimeout(() => {
          batching = void 0;
          forceRender({});
        });
      }
    };
    if (opts.keys) {
      unlisten = listenKeys(store, opts.keys, rerender);
    } else {
      unlisten = store.listen(rerender);
    }
    return () => {
      unlisten();
      clearTimeout(timer);
    };
  }, [store, "" + opts.keys]);
  return store.get();
}
export {
  useStore
};
//# sourceMappingURL=@nanostores_preact.js.map
